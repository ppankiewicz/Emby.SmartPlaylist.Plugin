<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SmartPlaylist plugin</title>
</head>
<body>


<div data-role="page" class="page type-interior pluginConfigurationPage smartPlaylistConfigPage" data-require="scrollHelper,formDialogStyle,emby-scroller,emby-input,emby-button,emby-select,emby-checkbox,emby-linkbutton,emby-select">

    <div data-role="content">
        <div class="content-primary">
            <div id="smartplaylist-root" data-app-id="3C96F5BC-4182-4B86-B05D-F730F2611E45"></div>
        </div>
    </div>


    <script type="text/javascript">

        function dynamicallyLoadScript(url) {
            const script = document.createElement("script");
            script.src = url;

            document.head.appendChild(script);
        }

        function dynamicallyLoadStyle(url) {
            fetch(url,
                    { method: 'GET' })
                .then(r => r.text())
                .then(response => {

                    var style = document.createElement('style');
                    style.appendChild(document.createTextNode(response));

                    document.head.appendChild(style);

                });

        }


        (function() {

            $('.smartPlaylistConfigPage').on('pageshow',
                function (event) {

                    ApiClient.getPluginConfiguration("3C96F5BC-4182-4B86-B05D-F730F2611E45").then(function (config) {

                        const version = '&' + ApiClient.serverVersion() + '&' + config.Version;

                        dynamicallyLoadStyle('./ConfigurationPage?name=smartplaylist.css'+version);
                        dynamicallyLoadScript('./ConfigurationPage?name=smartplaylist.js'+version);

                    });

                   
                });
        })();

    </script>
</div>
</body>
</html>